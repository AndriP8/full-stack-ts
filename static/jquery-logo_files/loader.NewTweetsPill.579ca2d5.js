(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{WXWl:function(t,e,i){"use strict";var s=i("ERkP"),a=i.n(s),o=i("Lsrn"),n=i("k/Ka");const r=(t={})=>Object(n.a)("svg",{...t,accessibilityHidden:void 0===t.accessibilityLabel,style:[o.a.root,t.style],viewBox:"0 0 24 24"},a.a.createElement("g",null,a.a.createElement("path",{d:"M18.707 10.293l-6-6c-.39-.39-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L11 7.414V20c0 .553.447 1 1 1s1-.447 1-1V7.414l4.293 4.293c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414z"})));r.metadata={width:24,height:24},e.a=r},o52z:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("VPAj");const a=Object(s.a)([]);Object(s.a)({})},xAHt:function(t,e,i){"use strict";i.r(e),i.d(e,"NewTweetsPill",(function(){return O}));var s=i("ERkP"),a=i.n(s),o=i("lnti"),n=i("hqKg"),r=i("o52z"),l=i("G6rE"),c=i("rxPX");const h=(t,e)=>e.alert&&e.alert.userIds||Object(r.a)();var m=Object(c.a)().propsFromState((()=>({userImageUrls:Object(n.createSelector)(l.e.selectAll,h,((t,e)=>e?Object(o.a)(e.map((e=>{const i=t[e];return i?i.profile_image_url_https:void 0}))):[]))}))).withAnalytics({component:"new_tweet_prompt"}),p=i("3XMw"),u=i.n(p),d=i("WXWl"),_=i("IbOt"),w=i("fs1G"),y=i("rcen"),b=i("MWbm"),S=i("I4+6"),g=i("rHpw"),T=i("cm6r"),f=i("MAI/"),v=i("t62R"),D=i("v6aA");const k=u.a.gdb8bdcc,A=u.a.ac0f6491,x={},I={};class O extends a.a.PureComponent{constructor(t,e){super(t,e),this.state={show:!1},this._getLastShownTime=()=>I[this.props.timelineId],this._hide=()=>{const{alert:t,removeAlert:e,timelineId:i}=this.props;this._mounted&&(this._updateLastShownTime(i),this.setState({show:!1})),t&&setTimeout((()=>e()),500)},this._attemptShow=()=>{const{alert:t,isAtNewest:e,removeAlert:i,timelineId:s,unreadCount:a}=this.props;if(this._attemptShowTimeout&&(clearTimeout(this._attemptShowTimeout),this._attemptShowTimeout=null),this._mounted&&(t||a>0)){const a=this._getDelayRemaining();if(a<=0){if(t&&e())return void i();this.setState({show:!0}),x[s]=Date.now(),this._scribeAction("show"),this._isSticky&&this._stickyDurationSeconds>0&&(this._autoDismissTimeout=setTimeout(this._hide,1e3*this._stickyDurationSeconds))}else this._attemptShowTimeout=setTimeout(this._attemptShow,a)}},this._handleScrollDown=()=>{const{alert:t,remainVisibleInterval:e,timelineId:i}=this.props;let s=e;t&&t.displayDurationMs&&t.displayDurationMs>-1&&(s=t.displayDurationMs),this.state.show&&Date.now()>=x[i]+s&&(this._scribeAction("dismiss"),this._hide())},this._handleClick=()=>{const{applyNewTweetsBarInstructions:t}=this.props;this._scribeAction("click"),window.scrollTo(0,0),null==t||t(),this._hide()},this._isSticky=this.context.featureSwitches.isTrue("responsive_web_home_sticky_new_tweets_pill_enabled"),this._stickyDurationSeconds=this.context.featureSwitches.getNumberValue("responsive_web_home_sticky_new_tweets_pill_duration_seconds",-1),this._delayOverrideSeconds=this.context.featureSwitches.getNumberValue("responsive_web_home_sticky_new_tweets_pill_delay_seconds",1)}componentDidMount(){this._mounted=!0,this._getLastShownTime()||this._updateLastShownTime(this.props.timelineId),this._attemptShow(),this._cancelMomentum=Object(_.a)({onUp:w.a,onDown:this._isSticky?w.a:this._handleScrollDown})}componentDidUpdate(t,e){const{alert:i,timelineId:s,unreadCount:a}=this.props,o=t.timelineId!==s,n=o&&!this._getLastShownTime();o?(n&&this._updateLastShownTime(s),e.show&&this._updateLastShownTime(t.timelineId),null==t.removeAlert||t.removeAlert(),this.setState({show:!1}),this._attemptShow()):((i&&!e.show||a>t.unreadCount)&&this._attemptShow(),!t.alert&&0!==a||i||this._hide())}componentWillUnmount(){const{removeAlert:t,timelineId:e}=this.props;this._mounted=!1,this._attemptShowTimeout&&clearTimeout(this._attemptShowTimeout),this._autoDismissTimeout&&clearTimeout(this._autoDismissTimeout),this.state.show&&(this._updateLastShownTime(e),null==t||t()),this._cancelMomentum()}render(){const{alert:t,label:e,userImageUrls:i}=this.props,{show:s}=this.state;let o;o=t?t.richText&&a.a.createElement(y.a,{entities:t.richText.entities,text:t.richText.text}):e;const n=S.a.generate({backgroundColor:g.a.theme.colors.primary,color:g.a.theme.colors.whiteOnColor});return a.a.createElement(b.a,{accessibilityRole:"status"},a.a.createElement(T.a,{accessibilityHidden:!s,accessibilityLabel:A,accessibilityRole:"button",interactiveStyles:n,onClick:this._handleClick,style:[C.pill,s&&C.show]},a.a.createElement(b.a,{style:C.innerPill},a.a.createElement(d.a,{style:C.icon}),i&&i.length>0?a.a.createElement(b.a,{style:C.facepile},a.a.createElement(f.a,{borderColor:"primary",userAvatarSize:"large",userAvatarUrls:i})):null,a.a.createElement(v.b,{color:"whiteOnColor",numberOfLines:1,style:C.pillText},o))))}_getDelayRemaining(){const{alert:t,triggerDelay:e}=this.props,i=this._isSticky&&this._delayOverrideSeconds>0?1e3*this._delayOverrideSeconds:t&&t.triggerDelayMs||e;return this._getLastShownTime()+i-Date.now()}_updateLastShownTime(t){t&&(I[t]=Date.now())}_scribeAction(t){const{analytics:e}=this.props;e.scribeAction(t)}}O.contextType=D.a,O.defaultProps={isAtNewest:()=>!0,label:k,remainVisibleInterval:3e3,triggerDelay:24e4,unreadCount:0};const C=g.a.create((t=>({pill:{boxShadow:t.boxShadows.small,backgroundColor:t.colors.primary,borderRadius:t.borderRadii.infinite,paddingHorizontal:t.spaces.space16,opacity:0,justifyContent:"center",transform:[{translate3d:"0, 0, 0"}],transitionProperty:"transform, opacity",transitionDuration:"0.15s",transitionTimingFunction:"ease, ease, step-end"},innerPill:{flexDirection:"row",paddingVertical:t.spaces.space4},icon:{width:t.spaces.space20,marginRight:t.spaces.space4,alignSelf:"center",color:t.colors.whiteOnColor},facepile:{marginRight:t.spaces.space8},pillText:{alignSelf:"center"},show:{opacity:1,transitionTimingFunction:"ease, ease, step-start",transform:[{translate3d:"0, 3.5em, 0"}]}}))),L=m(O);e.default=L}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.NewTweetsPill.579ca2d5.js.map