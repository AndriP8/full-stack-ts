(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"+Bsv":function(t,e,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("3XMw"),o=a.n(s),r=a("M2x3"),l="settingsAppBar",c=a("/yvb"),p=a("rHpw");const d=o.a.bb081ea1,u={viewType:"settings_button"},m=i.a.memo((({onPress:t,pullRight:e,to:a})=>i.a.createElement(c.a,{accessibilityLabel:d,behavioralEventContext:u,hoverLabel:{label:d},icon:i.a.createElement(r.a,null),link:a,onPress:t,pullRight:e,style:h.button,testID:l,type:"primaryText"}))),h=p.a.create((t=>({button:{marginVertical:`calc(-${t.spaces.space12})`}})));e.a=m},QuZr:function(t,e,a){"use strict";a.d(e,"a",(function(){return z}));var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),o=a.n(s),r=a("oQhu"),l=a("z2Pn"),c=a("rxPX");const p=Object(r.a)(((t,e)=>e&&e.notificationsModule(t)));var d=a("FIs5"),u=a("ezF+"),m=a("QIgh"),h=a("8UdT"),y=a("AP4B");var b={loader:()=>Promise.all([a.e(0),a.e(3),a.e(5),a.e(6),a.e(227)]).then(a.bind(null,"RfPh")),loaderKey:"defaultNotificationLoader",strategy:a("XBtf").a.Critical};var f=u.e(b),g=a("rHpw"),_=a("VrCx"),T=a("xWpm");const w={[h.b.Notification]:f,[h.b.Tweet]:u.c({selectDisplayType:t=>t.content.displayType,handlers:{[_.a.Tweet]:Object(T.f)({allowDownvote:!0,createAdditionalProps:(t,{isUnread:e})=>({isUnread:e}),selectData:({entry:t,module:e})=>({isUnread:a=>e.selectIsUnread(a,t.entryId)}),withMuteConversation:!0}),[_.a.QuotedTweet]:Object(T.c)({createAdditionalProps:t=>({isCondensed:!0,style:v.quotedTweet})})}})};var E={...Object(m.a)({tweetDismissable:!0,withMuteConversation:!0}),...w,...y.a};const v=g.a.create((t=>({quotedTweet:{marginHorizontal:t.componentDimensions.gutterHorizontal,marginTop:0,marginBottom:t.componentDimensions.gutterVertical}})));var M=a("3XMw"),A=a.n(M),P=a("f42t"),I=a("EUHl"),S=a("5waQ"),x=a("VE3M"),C=a("yoO3"),k=a("fTQJ"),L=a("v6aA");const O={notifications_alt_a:[{height:200,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-400x200.v1.png",width:400},{height:400,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-800x400.v1.png",width:800},{height:600,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-1200x600.v1.png",width:1200}],notifications_alt_b:[{height:200,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-400x200.v1.png",width:400},{height:400,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-800x400.v1.png",width:800},{height:600,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-1200x600.v1.png",width:1200}]},V={notifications_alt_a:{[S.a.All]:{headerMessage:A.a.b6a43e77,bodyMessage:A.a.f269c47d,buttonText:A.a.g6871092},[S.a.Mentions]:{headerMessage:A.a.e577e1a1,bodyMessage:A.a.b91e5a3a}},notifications_alt_b:{[S.a.All]:{headerMessage:A.a.g264f125,bodyMessage:A.a.a3420a9b,buttonText:A.a.g6871092},[S.a.Mentions]:{headerMessage:A.a.ef0b8028,bodyMessage:A.a.b91e5a3a}}},j=t=>["control","notifications_alt_a","notifications_alt_b"].includes(t),R=t=>O[t],U=(t,e,a)=>{var n,i;return null==(n=V[e])||null==(i=n[a])?void 0:i[t]},N=(t,e)=>U("bodyMessage",t,e),D=A.a.eb75875d,B=A.a.e9f1fbcb,Q=A.a.f287bb3a,F=A.a.h994ec4f,H=A.a.c06d4305,G=A.a.bfdb3c12,J=A.a.h1d919eb,W=A.a.ib4510fd;class X extends o.a.Component{constructor(...t){super(...t),this._getNewItemsPillLabel=()=>{switch(this.props.notificationsType){case S.a.All:return W;default:return}},this._getEmptyMessageBody=()=>{const t=this.context.featureSwitches.isTrue("responsive_web_reactions_enabled");switch(this.props.notificationsType){case S.a.Mentions:return j(this._emptyStateVariant)&&"control"!==this._emptyStateVariant?N(this._emptyStateVariant,this.props.notificationsType):H;case S.a.Verified:return t?J:G;default:return j(this._emptyStateVariant)&&"control"!==this._emptyStateVariant?N(this._emptyStateVariant,this.props.notificationsType):t?F:Q}},this._getEmptyMessageHeader=()=>{return j(this._emptyStateVariant)&&"control"!==this._emptyStateVariant?(t=this._emptyStateVariant,e=this.props.notificationsType,U("headerMessage",t,e)):B;var t,e},this._renderEmptyTimeline=()=>{if(this._emptyStateVariant=this.context.featureSwitches.getStringValue("responsive_web_notifications_empty_state_redesign_variant"),j(this._emptyStateVariant)&&"control"!==this._emptyStateVariant){const a=(t=this._emptyStateVariant,e=this.props.notificationsType,U("buttonText",t,e));return o.a.createElement(d.a,i()({},a&&{buttonLink:"/i/connect_people",buttonText:a},{header:this._getEmptyMessageHeader(),imageVariants:R(this._emptyStateVariant),message:this._getEmptyMessageBody(),onButtonPress:this._handleEmptyTimelineButtonPress,onImpression:this._handleEmptyTimelineImpression}))}var t,e;return o.a.createElement(d.a,{header:this._getEmptyMessageHeader(),message:this._getEmptyMessageBody(),onImpression:this._handleEmptyTimelineImpression})},this._handleEmptyTimelineImpression=()=>{const{analytics:t}=this.props;t.scribe({component:"empty_message",action:"impression"})},this._handleEmptyTimelineButtonPress=()=>{const{analytics:t}=this.props;t.scribe({component:"empty_message",element:"primary_cta",action:"click"})},this._handleAtTop=()=>{this._updateLastReadIfNeeded()}}componentDidMount(){const{notificationsType:t,setNotificationsType:e}=this.props;e(t)}componentWillUnmount(){const{markAllAsRead:t,notificationsType:e}=this.props;this._updateLastReadIfNeeded(),e===S.a.All&&t()}render(){const{notificationsModule:t}=this.props;return t?o.a.createElement(C.a,null,o.a.createElement(k.a,{entryConfiguration:E,key:"notification-timeline",module:t,newTweetsPillLabel:this._getNewItemsPillLabel(),newTweetsPillMode:I.a.CLIENT,onAtTop:this._handleAtTop,renderEmptyState:this._renderEmptyTimeline,title:D})):null}_updateLastReadIfNeeded(){const{notificationsType:t,unreadCount:e,updateLastRead:a}=this.props;e&&a(t)}}X.contextType=L.a;const q=t=>Object(P.a)((t=>Object(c.a)().propsFromState((()=>({unreadCount:(e,{ntabData:a})=>{var n;return null==(n=p(t,a))?void 0:n.selectUnreadEntriesCount(e)}}))).adjustStateProps((({unreadCount:e},{ntabData:a})=>({ntabData:null,notificationsModule:p(t,a),notificationsType:t,unreadCount:e}))).propsFromActions((({ntabData:e})=>{var a;return{markAllAsRead:null==(a=p(t,e))?void 0:a.markAllAsRead,updateLastRead:e&&e.updateLastSeenCursor,setNotificationsType:l.j}})).withAnalytics({page:"ntab",section:t}))(t)(X),{ntabData:x.a}),z=({notificationsType:t})=>q(t)},WR6I:function(t,e,a){"use strict";a.r(e),a.d(e,"NotificationsScreen",(function(){return N}));a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("v6aA"),o=a("es0u"),r=a("G6rE"),l=a("rxPX");var c=Object(l.a)().propsFromState((()=>({loggedInUser:r.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:t})=>({isLoggedInUserVerified:!!t&&t.verified}))).withAnalytics({page:"ntab"}),p=a("pnqf"),d=a("dwig"),u=a("0+qk"),m=a("3XMw"),h=a.n(m),y=a("yoO3"),b=a("5FtR"),f=a("wytG"),g=a("+Bsv"),_=a("VS6U"),T=a("mw9i"),w=a("k/OQ"),E=a("zCf4");const v=h.a.eb75875d,M=h.a.f8321d82,A=h.a.cdb53d79,P=h.a.h3290871,I=h.a.a98ba778,S="/notifications",x="/notifications/mentions",C="/notifications/verified",k=i.a.createElement(g.a,{pullRight:!0,to:"/settings/notifications"}),L=h.a.eb75875d,O=Object(p.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"hCg+"))))),V=Object(p.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"lGAB"))))),j=Object(p.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"srGC"))))),R=[{to:S,key:M,label:M,retainScrollPosition:!1},{to:x,key:A,label:A,retainScrollPosition:!1}],U=[...R,{to:C,key:P,label:P,retainScrollPosition:!1}],N=t=>{const{featureSwitches:e}=i.a.useContext(s.a),a=e.isTrue("responsive_web_ntab_verified_mentions_vit_internal_dogfood"),{history:n,isLoggedInUserVerified:r,location:l}=t,c=r||a,p=i.a.createElement(E.d,null,i.a.createElement(E.b,{component:O,exact:!0,path:S}),i.a.createElement(E.b,{component:V,exact:!0,path:x}),i.a.createElement(E.b,{component:j,exact:!0,path:C}));return l.pathname!==C||c?i.a.createElement(y.a,null,i.a.createElement(_.a,{documentTitle:v,history:n,primaryContent:(()=>{const t=i.a.createElement(u.a,{history:n});return i.a.createElement(d.a,{component:T.a,fab:t},p)})(),rightControl:k,secondaryBar:(()=>{const t=c?U:R;return i.a.createElement(w.a,{accessibilityLabel:I,links:t})})(),sidebarContent:i.a.createElement(o.a,null),title:L})):i.a.createElement(b.a,{to:S})};e.default=c(N)},f42t:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),o=a.n(s);class r extends o.a.Component{constructor(...t){super(...t),this.state={isLoaded:!1}}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(t){return this.props.modules===t.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:t}=this.props,e=Object.keys(t);return Promise.all(e.map((e=>t[e]()))).then((t=>e.reduce(((e,a,n)=>(e[a]=t[n],e)),{}))).then((t=>{if(!this._isMounted)return null;this.setState({modules:t,isLoaded:!0})}))}render(){const{isLoaded:t}=this.state,e=t?this.state.modules:{};return o.a.Children.only(this.props.children(e||{}))}}const l=(t,e)=>a=>o.a.createElement(r,{modules:e},(e=>o.a.createElement(t,i()({},e,a))))},"hCg+":function(t,e,a){"use strict";a.r(e);var n=a("5waQ"),i=a("QuZr");e.default=Object(i.a)({notificationsType:n.a.All})},lGAB:function(t,e,a){"use strict";a.r(e);var n=a("5waQ"),i=a("QuZr");e.default=Object(i.a)({notificationsType:n.a.Mentions})},qJ6t:function(t,e,a){"use strict";a.r(e),a.d(e,"notificationsModule",(function(){return p})),a.d(e,"updateLastSeenCursor",(function(){return d}));var n=a("vWJI"),i=a("k49u"),s=a("0KEI"),o=a("UtAB"),r=a("fs1G"),l=a("5waQ"),c=a("ZNT5");const p=(t=l.a.All)=>Object(c.a)({timelineId:`notifications-${t}`,getEndpoint:t=>t.URT.fetchNotifications,getEndpointParams:e=>{const{polling:a,...n}=e;return{type:t,...n}},context:"FETCH_NOTIFICATIONS_TIMELINE",perfKey:"notifications",postFetchAction:o.a,staleIntervalMs:5e3}),d=(t=l.a.All)=>(e,a,{api:o})=>{const l=p(t),c=l&&n.getTopCursor(l.selectEntries(a()));if(c){const a={cursor:n.getValue(c),type:t},l=e(Object(s.createLocalApiErrorHandlerWithContextFactory)("APP_UPDATE_NOTIFICATION_LAST_READ")({[i.a.AppInReadOnlyMode]:{customAction:r.a}}));o.URT.updateNotificationsLastSeenCursor(a).catch(l)}};e.default=p(l.a.All)},srGC:function(t,e,a){"use strict";a.r(e);var n=a("5waQ"),i=a("QuZr");e.default=Object(i.a)({notificationsType:n.a.Verified})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Notifications.f354a595.js.map